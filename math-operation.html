<script type="text/javascript">
  RED.nodes.registerType("math-operation", {
    category: "function",
    color: "#f85858",
    defaults: {
      name: { value: "" },
      options: { value: "" },
    },
    inputs: 1,
    outputs: 1,
    icon: "fa",
    oneditprepare: function () {
      $("#node-input-options").val(this.options);
      let options = [];

      // const fetchURL = () => {
      //   const url = "";

      //   fetch(url)
      //     .then((res) => res.json())
      //     .then((data) => {
      //       data.forEach((item) => {
      //         if (item.name.length < 40) {
      //           options.push({
      //             v: `${item.value}`,
      //             t: item.name,
      //           });
      //         } else {
      //           options.push({
      //             v: `${item.value}`,
      //             t: item.name,
      //           });
      //         }
      //       });
      //       for (let i = 0; i < options.length; i++) {
      //         let value = options[i].v;
      //         let text = options[i].t;
      //         $("#node-input-options").append(
      //           $("<option></option>").attr("value", value).text(text) //For every element in the select tag append appropriate value and text (   <option value="#">#</option>    )
      //         );
      //       }
      //     });
      // };
    },
    label: function () {
      let options = this.options;
      let optionText = "";

      // for (let i = 0; i < options.length; i++) {
      //   if (options[i].v === this.options) {
      //     optionText = options[i].t;
      //     break;
      //   }
      // }
      return this.name || "Custom Select";
    },
  });
</script>

<script type="text/html" data-template-name="math-operation">
  <div style="width: 100%;" class="form-row">
    <label style="width: 30%;"" for="node-input-options">Select Datapoint</label>
    <select style="width: 60%;" id="node-input-options">
      <option value="" selected>Select Datapoint</option>
      <!-- <option value="one">Lead Pump Selection</option>
      <option value="two">Pump 1 DPT Pressure</option>
      <option value="three">System Command Run</option> -->
      <option value="ZHT0062_2.System.LeadPump.Selection">Lead Pump Selection</option>
      <option value="ZHT0062_2.Pump.1.DPT.Pressure">Pump 1 DPT Pressure</option>
      <option value="ZHT0062_1.System.Command.Run">System Command Run</option>
    </select>
  </div>

  <br />
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
</script>
<script type="text/javascript"></script>
